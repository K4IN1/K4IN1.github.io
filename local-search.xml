<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>crazyswarm2</title>
    <link href="/2025/04/22/crazyswarm2/"/>
    <url>/2025/04/22/crazyswarm2/</url>
    
    <content type="html"><![CDATA[<h1 id="Crazyflie集群配置"><a href="#Crazyflie集群配置" class="headerlink" title="Crazyflie集群配置"></a>Crazyflie集群配置</h1><p>这里使用了22.04lts以及ROS Humble python3.10 没有Conda或Venv</p><span id="more"></span><h2 id="无人机固件与地址"><a href="#无人机固件与地址" class="headerlink" title="无人机固件与地址"></a>无人机固件与地址</h2><h3 id="安装cfclient"><a href="#安装cfclient" class="headerlink" title="安装cfclient"></a>安装cfclient</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 install cfclient<br></code></pre></td></tr></table></figure><p>安装crazyflie客户端  </p><blockquote><p>terminal输入cfclient打开客户端</p></blockquote><p>为正常使用Radio，请记得参考<a href="https://www.bitcraze.io/documentation/repository/crazyflie-lib-python/master/installation/usb_permissions/"><strong>USB permissions | Bitcraze</strong></a></p><h3 id="刷写固件"><a href="#刷写固件" class="headerlink" title="刷写固件"></a>刷写固件</h3><h4 id="正常情况下更新固件"><a href="#正常情况下更新固件" class="headerlink" title="正常情况下更新固件"></a>正常情况下更新固件</h4><ol><li><p>打开无人机开关，电机自检完成后，在cfclient左上角输入地址，点击<strong>Scan</strong>扫描，没找到就再点一下</p></li><li><p>在左边选择对应无人机的地址连接<br>连接成功点击菜单栏<strong>Connect-&gt;Bootloader</strong>，在下面选择cf2，然后选择对应版本的固件，需要Github的链接</p></li><li><p>点击右下角<strong>Program</strong>即可，无人机会重启数次，一直到左下角的Status显示为<strong>IDLE</strong>就完成了固件升级</p></li></ol><h4 id="固件损坏情况下刷写固件"><a href="#固件损坏情况下刷写固件" class="headerlink" title="固件损坏情况下刷写固件"></a>固件损坏情况下刷写固件</h4><p>如果无人机不能正常启动，我们可以手动让他进入bootloader模式</p><ol><li><p>长按无人加按钮约3-5秒后松开，两盏蓝色的灯交替闪烁，即进入冷启动</p></li><li><p>同样使用cfclient，在<strong>Connect-&gt;Bootloader</strong>选择<strong>Coldboot</strong>选项卡</p></li><li><p>在这里点击<strong>Restart in bootloader mode</strong>，随后即可选择版本并且刷写固件</p></li></ol><h3 id="更改无人机地址"><a href="#更改无人机地址" class="headerlink" title="更改无人机地址"></a>更改无人机地址</h3><p>无线链接无人机后，点<strong>Connect-&gt;configure 2.x</strong> 即可修改参数</p><blockquote><p>无人机地址格式类似为如下格式<br><code>0/80/2M/E7E7E7E7E7</code><br>第一位数字为使用的Radio，默认0使用找到的第一个radio，1则使用第二个radio<br>一般使用一个radio即可，若使用多个Radio则保证其均负载<br>第二位两个数字为信道，随后是带宽，一般选最高的2M<br>后面的为十六进制表示的地址，一般修改最后两位</p></blockquote><p>点击<strong>write</strong>写入，重启无人机即可应用更改</p><h2 id="动捕配置"><a href="#动捕配置" class="headerlink" title="动捕配置"></a>动捕配置</h2><p>在动捕软件标定完成后，打开crazyflie开关，激活红外led marker，如有可能，关闭动捕摄像头的红外发射  </p><blockquote><p>先在设备左边栏，全部选中摄像头<br>在下面高级设置中更改补光强度，0即关闭红外  </p></blockquote><p>更改对应曝光时间和检测阈值，使得四个点被稳定的识别<br>标定刚体后，点击左边栏的传输设置，选择对应交换机组网下的ip，更改方向为z-up，开启vrpn刚体传输即可  </p><h2 id="使用Crazyswarm"><a href="#使用Crazyswarm" class="headerlink" title="使用Crazyswarm"></a>使用Crazyswarm</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>可先参考Crazyswarm2的<a href="https://imrclab.github.io/crazyswarm2/">官方文档</a><br>安装对应依赖</p><p>随后新建一个ros2_ws&#x2F;src并进入该目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> --recursive https://github.com/K4IN1/crazyswarm2_ARIC.git<br></code></pre></td></tr></table></figure><p>然后回到ros2_ws</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release<br></code></pre></td></tr></table></figure><p>编译完成后记得<code>source install/setup.bash</code></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>绝大多数配置的更改在crazyflie&#x2F;config中即可完成<br>主要修改的是motion_capture.yaml和crazyflies.yaml</p><ul><li><p>motioncap.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">ros__parameters:</span><br>  <span class="hljs-comment"># one of &quot;optitrack&quot;, &quot;optitrack_closed_source&quot;, &quot;vicon&quot;, &quot;qualisys&quot;, &quot;nokov&quot;, &quot;vrpn&quot;, &quot;motionanalysis&quot;</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">&quot;vrpn&quot;</span><br>  <span class="hljs-comment"># Specify the hostname or IP of the computer running the motion capture software</span><br>  <span class="hljs-attr">hostname:</span> <span class="hljs-string">&quot;169.254.210.141&quot;</span><br></code></pre></td></tr></table></figure><p>将这里的ip改成动捕电脑的ip即可，记得修改网络的网段，手动指定同网段下的ip，例如169.254.210.200<br>可以通过<code>ping &lt;ip&gt;</code>的形式来确定网络连接</p></li><li><p>crazyflies.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">robots:</span><br><span class="hljs-attr">cf1:</span><br>  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#这里控制是否启用控制，防止意外连接到开机但是不使用的无人机</span><br>  <span class="hljs-comment"># uri: radio://0/20/2M/E7E7E7E7E9</span><br>  <span class="hljs-attr">uri:</span> <span class="hljs-string">radio://0/80/2M/E7E7E7E702</span> <span class="hljs-comment"># 更改这里的地址为需要控制的无人机</span><br>  <span class="hljs-attr">initial_position:</span> [<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>] <span class="hljs-comment">#仿真用，散点用，刚体不重要</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">cf21_mocap_deck</span> <span class="hljs-string">//与下面的robot_type相对应</span><br>  <span class="hljs-string">......</span><br>  <span class="hljs-attr">robot_types:</span><br><span class="hljs-attr">cf21:</span><br>  <span class="hljs-attr">motion_capture:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># only if enabled; see motion_capture.yaml</span><br>    <span class="hljs-attr">marker:</span> <span class="hljs-string">default_single_marker</span><br>    <span class="hljs-attr">dynamics:</span> <span class="hljs-string">default</span><br>  <span class="hljs-attr">big_quad:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">battery:</span><br>    <span class="hljs-attr">voltage_warning:</span> <span class="hljs-number">3.8</span>  <span class="hljs-comment"># V</span><br>    <span class="hljs-attr">voltage_critical:</span> <span class="hljs-number">3.7</span> <span class="hljs-comment"># V</span><br><br><span class="hljs-attr">cf21_mocap_deck:</span><br>  <span class="hljs-attr">motion_capture:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-string">//是否启用动捕</span> <span class="hljs-string">，这里有时会有bug，一般不会出错，如果有出现类似动捕定位失效的情况，可以将这里改成false看看</span><br>    <span class="hljs-comment"># only if enabled; see motion_capture.yaml</span><br>    <span class="hljs-attr">marker:</span> <span class="hljs-string">mocap_deck</span><br>    <span class="hljs-attr">dynamics:</span> <span class="hljs-string">default</span><br>  <span class="hljs-attr">big_quad:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">battery:</span><br>    <span class="hljs-attr">voltage_warning:</span> <span class="hljs-number">3.8</span>  <span class="hljs-comment"># V</span><br>    <span class="hljs-attr">voltage_critical:</span> <span class="hljs-number">3.7</span> <span class="hljs-comment"># V</span><br>  <span class="hljs-string">......</span><br><span class="hljs-attr">all:</span><br>  <span class="hljs-comment">#这里是全局生效的参数，一般不需要修改</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ros2 launch crazyflie launch.py <br></code></pre></td></tr></table></figure><p>使用上述设置启动对应服务<br>会弹出rviz和nicegui的localhost网页界面</p><blockquote><p>通过手动移动无人机观测rviz中的无人机位置来确定动捕定位的情况<br>通过查看nicegui是否为白屏或crazyradio上的灯是否两栖或crazyflie左上角的灯是否为绿色闪烁，<strong>来确定无人机是否连接</strong><br>一切准备就绪即可运行python脚本<br>如要在vscode中直接运行需遵循下述条件</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">...<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(): <span class="hljs-comment">#定义main()</span><br><br>...<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>: <span class="hljs-comment">#独立执行入口</span><br>    main()<br></code></pre></td></tr></table></figure><p>即可<br>也可以通过crazyflie_example下的setup.cfg来指定程序入口，更改后需要重新<code>colcon build</code></p><h2 id="具体函数使用方法"><a href="#具体函数使用方法" class="headerlink" title="具体函数使用方法"></a>具体函数使用方法</h2><h3 id="核心类Crazyswarm"><a href="#核心类Crazyswarm" class="headerlink" title="核心类Crazyswarm"></a>核心类Crazyswarm</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> crazyflie_py <span class="hljs-keyword">import</span> Crazyswarm<br>swarm = Crazyswarm()<br>timeHelper = swarm.timeHelper <span class="hljs-comment">#时间控制函数</span><br>timeHelper.sleep(<span class="hljs-number">2.0</span>) <span class="hljs-comment"># s</span><br>allcfs = swarm.allcfs<br><span class="hljs-comment">## 全局使用allcfs.func() 采用相对位置</span><br><span class="hljs-comment">#如</span><br>Z = <span class="hljs-number">0.5</span><br>allcfs.takeoff(targetHeight=Z, duration=Z+<span class="hljs-number">1.0</span>)  <span class="hljs-comment"># 绝对高度</span><br>timeHelper.sleep(Z+<span class="hljs-number">2.0</span>)<br>allcfs.goTo(...) <span class="hljs-comment"># 相对位置</span><br></code></pre></td></tr></table></figure><h3 id="个体类Crazyflie"><a href="#个体类Crazyflie" class="headerlink" title="个体类Crazyflie"></a>个体类Crazyflie</h3><p>一般从核心类中获取，可以为个体无人机单独执行某指令</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">...<br>name1 = <span class="hljs-string">&#x27;cf1&#x27;</span> <span class="hljs-comment"># 与crazyflie.yaml对应</span><br>cf1:Crazyflie = swarm.allcfs.crazyfliesByName[name1]<br>allcfs.takeoff(targetHeight=Z, duration=<span class="hljs-number">2.0</span>) <span class="hljs-comment"># 全部起飞</span><br>timeHelper.sleep(Z+<span class="hljs-number">2.0</span>) <span class="hljs-comment"># 绝大多数函数立刻返回，因此要进行sleep（）</span><br>cf1.goTo([<span class="hljs-number">0.5</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0.5</span>],yaw = <span class="hljs-number">0.0</span>,duration=<span class="hljs-number">3.0</span>) <span class="hljs-comment"># 只有cf1执行这个动作</span><br>timeHelper.sleep(<span class="hljs-number">4.0</span>)<br>...<br>allcfs.land(targetHeight=<span class="hljs-number">0.02</span>, duration=<span class="hljs-number">2.0</span>) <span class="hljs-comment"># 全部降落</span><br>timeHelper.sleep(<span class="hljs-number">2.0</span>)<br>...<br></code></pre></td></tr></table></figure><p>更多指令直接参考源码，注释较为详细</p><h3 id="轨迹格式"><a href="#轨迹格式" class="headerlink" title="轨迹格式"></a>轨迹格式</h3><p>参考<a href="https://github.com/whoenig/uav_trajectories"><strong>Github_link</strong></a><br>通过路点或时间路点生成所需轨迹，执行轨迹请参考example&#x2F;figure8.py</p><p>速度控制需参考cmd_full_state.<strong>py</strong><br>或者直接使用teleop Service cmd_vel_world<br>正如官方文档所示的</p><p><img src="/../img/2025-04-22_1.png" alt="官方文档截图">  </p><!-- ![alt text](../img/2025-04-22_1.png)   -->]]></content>
    
    
    
    <tags>
      
      <tag>无人机</tag>
      
      <tag>crazyswarm2</tag>
      
      <tag>ros2</tag>
      
      <tag>动捕</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>适用于WalkmanZX300A的低延迟USBDAC</title>
    <link href="/2025/04/22/ZX300A-%E4%BD%8E%E5%BB%B6%E8%BF%9FUSBDAC/"/>
    <url>/2025/04/22/ZX300A-%E4%BD%8E%E5%BB%B6%E8%BF%9FUSBDAC/</url>
    
    <content type="html"><![CDATA[<h1 id="修改固件解决WalkmanUSBDAC延迟问题"><a href="#修改固件解决WalkmanUSBDAC延迟问题" class="headerlink" title="修改固件解决WalkmanUSBDAC延迟问题"></a>修改固件解决WalkmanUSBDAC延迟问题</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>索尼Walkman的USBDAC功能具有巨大延迟，对于简易的桌面HIFI来说极为不友好。观影倒是无所谓，但是游戏语音则会造成巨大的影响。<br>之前无意中在GitHub上搜索了Sony关键字，找到了这个<a href="https://github.com/zhangboyang/llusbdac">项目</a>。他可以修改Walkman的固件，实现低延迟的PCM输出，与此同时还不会影响播放器的正常输出，于是尝试魔改我的ZX300A  </p><span id="more"></span><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>关于固件：<em>Walkman的声音和固件版本有很大关系，这里建议多下几个<strong>不同版本</strong>的固件多试一试，选自己喜欢的固件去魔改</em></p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>这里选择ZX300A公认的最好固件V1.10，虽然没有了2.x版本的蓝牙输出功能，但是声音是真的好不少，下载地址请自行寻找<br>这里是使用了发行版Linux，Ubuntu22.04进行编译，最终修改完的固件依然要是用官方的windows更新文件进行安装，<em><strong>确保自己拥有对应的两个环境再进行操作</strong></em></p><h3 id="安装需要使用的软件包"><a href="#安装需要使用的软件包" class="headerlink" title="安装需要使用的软件包"></a>安装需要使用的软件包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install -y git make wget<br></code></pre></td></tr></table></figure><h3 id="克隆代码"><a href="#克隆代码" class="headerlink" title="克隆代码"></a>克隆代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/zhangboyang/llusbdac.git<br></code></pre></td></tr></table></figure><h3 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> llusbdac/<br>./get_toolchain.sh<br></code></pre></td></tr></table></figure><p>当出现以下内容时，就可以配置环境变量了  </p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">=== TO ADD COMPILER TO YOUR $PATH, PLEASE RUN ===<br></code></pre></td></tr></table></figure><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">. setpath<br>arm-linux-gnueabinf-gcc --version<br></code></pre></td></tr></table></figure><p>如果出现<code>gcc version x.x.x</code>就认为配置正确</p><h2 id="准备Walkman源码"><a href="#准备Walkman源码" class="headerlink" title="准备Walkman源码"></a>准备Walkman源码</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>进入Sony的Linux Kernel源代码<a href="https://oss.sony.net/Products/Linux/Audio/category01.html#ca3">下载界面</a><br>找到自己的型号，点进去下载对应的linux-kernel-3.xx.xx.tar.gz<br>在Linux系统下下载，可以直接用浏览器也可以用wget  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget &lt;下载链接&gt;<br></code></pre></td></tr></table></figure><h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><p>记得把下面的文件名改成你自己的  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> kernel<br>tar -xzf linux-kernel-3.10.26.tar.gz -C kernel<br><span class="hljs-built_in">cd</span> kernel<br><span class="hljs-built_in">cat</span> HowToBuild.txt<br></code></pre></td></tr></table></figure><h3 id="获取配置文件"><a href="#获取配置文件" class="headerlink" title="获取配置文件"></a>获取配置文件</h3><p>复制输出的那一段<code>Kernel Configuration Infomation</code><br>注意其中的那一段路径<code>arch/arm/xxxxxx</code><br>每个人的不一定是一样的，然后复制对应的配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> <span class="hljs-built_in">arch</span>/arm/configs/xxxxxxx .config<br></code></pre></td></tr></table></figure><p>然后就可以开始编译了</p><h3 id="编译配置文件"><a href="#编译配置文件" class="headerlink" title="编译配置文件"></a>编译配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- olddefconfig<br>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- prepare<br>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- scripts<br></code></pre></td></tr></table></figure><p>等待编译完成即可，如果有Warning不用在意，Error则要自己想办法解决，每个人都不一样<br>一般是环境问题，缺什么装什么，充分利用搜索引擎</p><h3 id="编译LLUSBDAC"><a href="#编译LLUSBDAC" class="headerlink" title="编译LLUSBDAC"></a>编译LLUSBDAC</h3><p>回到llusbdac目录，开始编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ../llusbdac/<br>make<br></code></pre></td></tr></table></figure><p>最后有<code>sha256sum llusbdac.ko &gt; llusbdac.sha256</code>即可<br>把编译出来的llusbdac都保存好，复制到Windows备用</p><h2 id="准备索尼更新软件"><a href="#准备索尼更新软件" class="headerlink" title="准备索尼更新软件"></a>准备索尼更新软件</h2><h3 id="下载更新器"><a href="#下载更新器" class="headerlink" title="下载更新器"></a>下载更新器</h3><ol><li><p>前往<a href="https://www.sony-asia.com/electronics/support/digital-music-players-nw-nwz-a-series">索尼亚洲官网</a>，寻找自己的型号和对应的Software。  </p></li><li><p>我这边也提供一个ZX300&#x2F;A的1.10<a href="https://pan.baidu.com/s/1HWUimoB73ZijuToXG_xxJA">固件</a>（提取码：pfzc）。</p></li><li><p>运行更新软件，然后到更新器界面，先不要点击“我同意”和“下一步”。</p></li><li><p>打开Windows的任务管理器，右键打开<code>Software Update Tool</code>的<strong>文件所在的位置</strong>。</p></li><li><p>进入<code>Data/Device</code>目录，找到<code>NW_WM_FW.UPG</code>固件更新包并复制出来。</p></li></ol><h3 id="解包固件"><a href="#解包固件" class="headerlink" title="解包固件"></a>解包固件</h3><ol><li><p>下载<a href="https://www.rockbox.org/wiki/SonyNWUPGTool">UPG工具</a></p></li><li><p>把这个工具和刚复制出来的固件放在同一个文件夹</p></li><li><p>打开Powershell或cmd，进入该目录，执行以下命令然后用Powershell或者cmd到这个目录下面</p></li><li><p>还是在UPG工具的网站，找到自己Series对应的codename,记住自己的codename，例如我的ZX300A对应 <code>nw-zx300</code>  </p></li><li><p>shell输入</p> <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Powershell">.\upgtool<span class="hljs-literal">-v3</span>.exe <span class="hljs-literal">-d</span> <span class="hljs-literal">-e</span> <span class="hljs-literal">-o</span> UNPACK <span class="hljs-literal">-m</span> nw<span class="hljs-literal">-zx300</span> NW_WM_FW.UPG<br></code></pre></td></tr></table></figure></li><li><p>在目录下找到解包后的UNPACKx.bin文件，用文本编辑器打开UNPACK0.bin。</p></li><li><p>全选，看右下角的文件字符数，应该是8192个<br>直接拉到最后一行，找到<code>log &quot;UPDATED!&quot;</code>在他的上面添加LLUSBDAC相关的内容</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sleep</span> 3<br>mount -o remount,rw /contents<br>(<span class="hljs-built_in">cd</span> /contents &amp;&amp; busybox <span class="hljs-built_in">sha256sum</span> -c LLUSBDAC.SUM &amp;&amp; busybox sh LLUSBDAC.DAT &amp;&amp; <span class="hljs-built_in">rm</span> -f LLUSBDAC.SUM LLUSBDAC.DAT)<br>mount -o remount,ro /contents<br><span class="hljs-built_in">sync</span><br><span class="hljs-built_in">sync</span><br><span class="hljs-built_in">sleep</span> 3<br></code></pre></td></tr></table></figure><p> 把最后的<code>0x00</code>删除对应的数量，一直到右下角为8192个字符  </p></li><li><p>然后重新打包UPG  </p> <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">.\upgtool<span class="hljs-literal">-v3</span>.exe <span class="hljs-literal">-d</span> <span class="hljs-literal">-c</span> <span class="hljs-literal">-m</span> nw<span class="hljs-literal">-zx300</span> MYFW.UPG UNPACK0.bin UNPACK1.bin UNPACK2.bin UNPACK3.bin UNPACK4.bin UNPACK5.bin UNPACK6.bin UNPACK7.bin UNPACK8.bin<br></code></pre></td></tr></table></figure><p> 随后就打包出来了对应的<code>MYFW.UPG</code><br> 插上你的Walkman，打开大容量储存设备功能</p></li></ol><h3 id="替换原版固件"><a href="#替换原版固件" class="headerlink" title="替换原版固件"></a>替换原版固件</h3><ol><li><p>使用Pip安装<code>wmi</code></p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install -i https://opentuna.cn/pypi/web/simple wmi<br></code></pre></td></tr></table></figure></li><li><p>执行安装脚本</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">python .\llusbdac_installer.py<br></code></pre></td></tr></table></figure></li><li><p>勾选1、2项目即可,然后还是不要点击我同意和下一步</p></li><li><p>进入Walkman的目录，能找到<code>LLUSBDAC.DAT</code>和<code>LLUSBDAC.SUM</code>，这样就说明我们的内容上传成功了，直接关掉升级器</p></li><li><p>打开官方的升级软件，找到升级器的解压目录  </p></li><li><p>这个时候复制我们之前打包好的<code>MYFW.UPG</code>替换掉官方的那个<code>NW_WM_FW.UPG</code>然后重新命名<code>NW_WM_FW.UPG</code>  </p></li><li><p>按照提示完成安装就好，重启完了在USBDAC界面连按三下歌曲控制按键就可以了，重启播放器就可以关闭这个功能。</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Walkman</tag>
      
      <tag>USBDAC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用T265在rtabmap中定位建图</title>
    <link href="/2025/04/21/t265/"/>
    <url>/2025/04/21/t265/</url>
    
    <content type="html"><![CDATA[<h1 id="T265-On-Rtabmap"><a href="#T265-On-Rtabmap" class="headerlink" title="T265 On Rtabmap"></a>T265 On Rtabmap</h1><p>如何在rtabmap中使用T265建图</p><span id="more"></span><h2 id="RealsenseSDK与ROS"><a href="#RealsenseSDK与ROS" class="headerlink" title="RealsenseSDK与ROS"></a>RealsenseSDK与ROS</h2><p>从源码安装即可，SDK选择  </p><blockquote><p>RealSense ROS v2.3.1<br>Built with LibRealSense v2.48.0  </p></blockquote><p>测试是兼容的，注意下不要选择版本过高，否则T265的支持会掉<br>另外通过修改改源码的方式也可以提供原来版本的同步时间戳功能</p><h2 id="Odom"><a href="#Odom" class="headerlink" title="Odom"></a>Odom</h2><p>可以使用内置的方法，但我配置了半天没弄明白它的矫正和TF树，所以使用外置的其他VIO，如OPENVINS<br>OpenVINS的Odom追踪在IMU的LINK上，同时包含了一个cam0和cam1的固定变化<br>启动方式如下:</p><p>首先启动T265节点，需要指定IMU差值方法，并且enable两个鱼眼镜头，反而是pose这个topic不是很需要  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch realsense2_camera rs_t265.launch unite_imu_method:=linear_interpolation<br></code></pre></td></tr></table></figure><blockquote><p>建议是直接改这个launch文件，然后记住topic的NAME_SPACE<br>比如我这里使用camera  </p></blockquote><p>随后启动VINS</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch ov_msckf t265_openvins.launch<br></code></pre></td></tr></table></figure><blockquote><p>这个launch是我自己修改的，也给这个节点本身的源码添加了几个rosparam，记得要在config对应的配置文件修改topicname使其符合t265的topic  </p></blockquote><p>然后动一下相机，激活vins，这样才能让global树发送出来</p><h2 id="矫正图像"><a href="#矫正图像" class="headerlink" title="矫正图像"></a>矫正图像</h2><h3 id="发布正确的camerainfo"><a href="#发布正确的camerainfo" class="headerlink" title="发布正确的camerainfo"></a>发布正确的camerainfo</h3><p>原始的camerainfo为D[5]，鱼眼相机模型应该是D[4]，会导致节点报错，但我又不是从源码编译的这个节点，所以写一个python脚本发布</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python</span><br><span class="hljs-keyword">import</span> rospy<br><span class="hljs-keyword">from</span> sensor_msgs.msg <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">from</span> sensor_msgs.msg <span class="hljs-keyword">import</span> CameraInfo<br><span class="hljs-keyword">import</span> yaml<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">loadCalibrationFile</span>(<span class="hljs-params">filename, cname</span>):<br>    ci = CameraInfo()<br><br>    f = <span class="hljs-built_in">open</span>(filename)<br>    calib = yaml.load(f)<br>    <span class="hljs-keyword">if</span> calib <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        ci.width = calib[<span class="hljs-string">&#x27;image_width&#x27;</span>]<br>        ci.height = calib[<span class="hljs-string">&#x27;image_height&#x27;</span>]<br>        ci.distortion_model = calib[<span class="hljs-string">&#x27;distortion_model&#x27;</span>]<br>        ci.D = calib[<span class="hljs-string">&#x27;distortion_coefficients&#x27;</span>][<span class="hljs-string">&#x27;data&#x27;</span>]<br>        ci.K = calib[<span class="hljs-string">&#x27;camera_matrix&#x27;</span>][<span class="hljs-string">&#x27;data&#x27;</span>]<br>        ci.R = calib[<span class="hljs-string">&#x27;rectification_matrix&#x27;</span>][<span class="hljs-string">&#x27;data&#x27;</span>]<br>        ci.P = calib[<span class="hljs-string">&#x27;projection_matrix&#x27;</span>][<span class="hljs-string">&#x27;data&#x27;</span>]<br><br>    <span class="hljs-keyword">return</span> ci<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">data</span>):<br>    info.header = data.header<br>    <span class="hljs-comment">#　info.header.frame_id = &#x27;camera_fisheye1_optical_frame&#x27;</span><br>    pub.publish(info)<br>    <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    rospy.init_node(<span class="hljs-string">&#x27;camera_info_pub&#x27;</span>, anonymous=<span class="hljs-literal">True</span>)<br>    url = rospy.get_param(<span class="hljs-string">&#x27;~url&#x27;</span>)<br>    info = loadCalibrationFile(url, <span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(info)<br>    pub = rospy.Publisher(<span class="hljs-string">&#x27;camera_info&#x27;</span>, CameraInfo, queue_size=<span class="hljs-number">1</span>)<br>    rospy.Subscriber(<span class="hljs-string">&quot;image&quot;</span>, Image, callback)<br>    rospy.spin()<br></code></pre></td></tr></table></figure><p>运行的时候记得加上对应url</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 camera_info_pub1.py \ <br>image:=/camera/fisheye1/image_raw    \<br>camera_info:=/camera/fisheye1/camera_info_calib \ <br>_url:=./t265_left_1.yaml <br></code></pre></td></tr></table></figure><p>另一个bash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 camera_info_pub2.py \<br>_url:=./t265_right.yaml \<br>image:=/camera/fisheye2/image_raw    \<br>camera_info:=/camera/fisheye2/camera_info_calib<br><br></code></pre></td></tr></table></figure><p>yaml的格式应该是如下</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">camera_name:</span> <span class="hljs-string">&quot;905312112011_left&quot;</span><br><span class="hljs-attr">image_width:</span> <span class="hljs-number">848</span><br><span class="hljs-attr">image_height:</span> <span class="hljs-number">800</span><br><span class="hljs-attr">camera_matrix:</span><br>   <span class="hljs-attr">rows:</span> <span class="hljs-number">3</span><br>   <span class="hljs-attr">cols:</span> <span class="hljs-number">3</span><br>   <span class="hljs-attr">data:</span> [ <span class="hljs-number">2.8845847407434218e+02</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">4.2366155337303530e+02</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>,<br>       <span class="hljs-number">2.8732351128054398e+02</span>, <span class="hljs-number">4.0774252018099634e+02</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">1</span><span class="hljs-string">.</span> ]<br><span class="hljs-attr">distortion_coefficients:</span><br>   <span class="hljs-attr">rows:</span> <span class="hljs-number">1</span><br>   <span class="hljs-attr">cols:</span> <span class="hljs-number">4</span><br>   <span class="hljs-attr">data:</span> [ <span class="hljs-number">1.6108401660058620e-02</span>, <span class="hljs-number">-1.5462775664278158e-02</span>,<br>       <span class="hljs-number">9.5501371240367117e-03</span>, <span class="hljs-number">-6.7432882743460659e-03</span> ]<br><span class="hljs-attr">distortion_model:</span> <span class="hljs-string">equidistant</span><br><span class="hljs-attr">rectification_matrix:</span><br>   <span class="hljs-attr">rows:</span> <span class="hljs-number">3</span><br>   <span class="hljs-attr">cols:</span> <span class="hljs-number">3</span><br>   <span class="hljs-attr">data:</span> [ <span class="hljs-number">9.9996361896819130e-01</span>, <span class="hljs-number">1.0752140026281053e-03</span>,<br>       <span class="hljs-number">-8.4619533729723070e-03</span>, <span class="hljs-number">-1.0848458428058135e-03</span>,<br>       <span class="hljs-number">9.9999876886529271e-01</span>, <span class="hljs-number">-1.1337448549999169e-03</span>,<br>       <span class="hljs-number">8.4607239368243194e-03</span>, <span class="hljs-number">1.1428835231309651e-03</span>,<br>       <span class="hljs-number">9.9996355431971484e-01</span> ]<br><span class="hljs-attr">projection_matrix:</span><br>   <span class="hljs-attr">rows:</span> <span class="hljs-number">3</span><br>   <span class="hljs-attr">cols:</span> <span class="hljs-number">4</span><br>   <span class="hljs-attr">data:</span> [ <span class="hljs-number">2.8845847407434218e+02</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">4.2228301048278809e+02</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>,<br>       <span class="hljs-number">2.8845847407434218e+02</span>, <span class="hljs-number">4.0177149677276611e+02</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">0</span><span class="hljs-string">.</span>, <span class="hljs-number">1</span><span class="hljs-string">.</span>,<br>       <span class="hljs-number">0</span><span class="hljs-string">.</span> ]<br></code></pre></td></tr></table></figure><h3 id="启动矫正节点"><a href="#启动矫正节点" class="headerlink" title="启动矫正节点"></a>启动矫正节点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">ROS_NAMESPACE=camera rosrun stereo_image_proc stereo_image_proc \<br>left/image_raw:=fisheye1/image_raw \<br>right/image_raw:=fisheye2/image_raw \<br>left/camera_info:=fisheye1/camera_info_calib \<br>right/camera_info:=fisheye2/camera_info_calib<br></code></pre></td></tr></table></figure><p>该节点会发布矫正后的图像和双目点云</p><h2 id="启动RtabMap"><a href="#启动RtabMap" class="headerlink" title="启动RtabMap"></a>启动RtabMap</h2><p>最烦人的就是RtabMap的参数调整，很多参数感觉是重复的，又不知道应该在哪里指定<br>最终我尝试了使用矫正后的图像建图，然后直接拿OpenVins的里程计使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch rtabmap_ros rtabmap.launch \<br>args:=<span class="hljs-string">&quot;-d&quot;</span> \<br>odom_args:=<span class="hljs-string">&quot;--Rtabmap/ImagesAlreadyRectified true&quot;</span> \<br>stereo:=<span class="hljs-literal">true</span> \<br>left_image_topic:=/camera/left/image_rect_color \<br>right_image_topic:=/camera/right/image_rect \<br>visual_odometry:=<span class="hljs-literal">false</span> \<br>odom_frame_id:=global \<br>approx_sync:=<span class="hljs-literal">true</span> \<br>left_camera_info_topic:=/camera/fisheye1/camera_info_calib \<br>right_camera_info_topic:=/camera/fisheye2/camera_info_calib<br></code></pre></td></tr></table></figure><blockquote><p>visual_odometry:&#x3D;false 不使用内置里程计<br>left_image_topic:&#x3D;&#x2F;camera&#x2F;left&#x2F;image_rect_color 给到左眼彩色的矫正后图像，因为点云的构建需要用到彩色图像<br>odom_frame_id:&#x3D;global 告诉它使用的里程计的frame<br>approx_sync:&#x3D;true 因为消息之间会有时间差，即timestamp不同步，所以要使用这个选项异步运算  </p></blockquote><p>这样就可以实现视觉的3DSLAM了  </p><p>2025&#x2F;4&#x2F;22<br>0:25  </p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SLAM</tag>
      
      <tag>Realsense</tag>
      
      <tag>T265</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于realsense相机和rtabmap_ros的SLAM建图与重定位</title>
    <link href="/2024/08/06/%E5%9F%BA%E4%BA%8Erealsense%E7%9B%B8%E6%9C%BA%E5%92%8Crtabmap-ros%E7%9A%84SLAM%E5%BB%BA%E5%9B%BE%E4%B8%8E%E9%87%8D%E5%AE%9A%E4%BD%8D/"/>
    <url>/2024/08/06/%E5%9F%BA%E4%BA%8Erealsense%E7%9B%B8%E6%9C%BA%E5%92%8Crtabmap-ros%E7%9A%84SLAM%E5%BB%BA%E5%9B%BE%E4%B8%8E%E9%87%8D%E5%AE%9A%E4%BD%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="基于realsense相机和rtabmap-ros的SLAM建图与重定位"><a href="#基于realsense相机和rtabmap-ros的SLAM建图与重定位" class="headerlink" title="基于realsense相机和rtabmap_ros的SLAM建图与重定位"></a>基于realsense相机和rtabmap_ros的SLAM建图与重定位</h1><p>地图和定位对于可以动作的设备来说十分重要，对一些移动平台来讲也是如此，现研究采用视觉传感器进行SLAM建图  </p><h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><p>D435i为realsense相机中十分经典的一款，双目+RGB+IMU的传感器配置，给他提供了丰富的传感器信息。  </p><span id="more"></span><p>T265相机是配备了双目鱼眼+IMU的相机，内置有Intel自己的微处理器，作为视觉里程计。目前已经停止了许多软件支持。  </p><h2 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h2><p>在ROS中使用，考虑了ORB_SLAM和RTABMAP  </p><h3 id="ORB-SLAM"><a href="#ORB-SLAM" class="headerlink" title="ORB_SLAM"></a>ORB_SLAM</h3><p>由于ORB_SLAM的功能过于匮乏，保存载入的功能需要自己MOD。在Github上找到了高翔他们的点云MOD版本，但是生成的点云方向需要调整，而且对地面的过滤算法需要自己来写，也有尝试转成OctoMap地图，然后投影到地面的方案，但是由于点云的地面不平、倾斜较大，放弃了这个方案。<br>虽然定位较为稳定，但是因为地图导出困难，保存和加载功能需要自己MOD  </p><h3 id="RTAB-MAP"><a href="#RTAB-MAP" class="headerlink" title="RTAB_MAP"></a>RTAB_MAP</h3><p>RTAB_MAP可以接收视觉，2D激光和3D激光多种信息，进行建图保存、加载、定位，其功能较为完善，使用的tutorial也相对较多，缺点是性能开销较大，但是可以通过关闭3D显示相关的功能来缓解，或者直接使用RVIZ来可视化，另外其参数调整的空间也很大，比较适合建图重定位。  </p><h1 id="安装和调试"><a href="#安装和调试" class="headerlink" title="安装和调试"></a>安装和调试</h1><p>本次软件使用采用了UBuntu18.04的版本，因此也对硬件的型号有一定要求，过于新的网卡显卡甚至是触摸板都是需要自己额外打驱动上去的，建议使用</p><h2 id="RealsenseSDK"><a href="#RealsenseSDK" class="headerlink" title="RealsenseSDK"></a>RealsenseSDK</h2><p>由于Intel官方在新的版本中放弃了对T265等老旧设备的支持，因此选择安装SDK为2.50版本。<br>依照官方文档的<a href="https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md#installing-the-packages">操作</a><br>下载对应的公钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">mkdir</span> -p /etc/apt/keyrings<br>curl -sSf https://librealsense.intel.com/Debian/librealsense.pgp | sudo <span class="hljs-built_in">tee</span> /etc/apt/keyrings/librealsense.pgp &gt; /dev/null<br></code></pre></td></tr></table></figure><p>随后添加到列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;deb [signed-by=/etc/apt/keyrings/librealsense.pgp] https://librealsense.intel.com/Debian/apt-repo `lsb_release -cs` main&quot;</span> | \<br>sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/librealsense.list<br>sudo apt-get update<br></code></pre></td></tr></table></figure><p>然后就可以安装了  </p><blockquote><p>注意:<em>安装全程请拔出相机。接下来的步骤需要查询并输入对应版本号，请直接从查询结果里复制，或者使用tab进行补全，本文的内容经过验证，但是文章输入难免有错误，请见谅。按照顺序进行，一旦有报错，请使用<code>sudo apt --fix-broken install</code>解决之后再进行下一步安装</em><br>使用<code>apt list -a librealsense2-dkms</code> 或者 <code>apt-cache madison librealsense2-dkms</code> 来查询软件包的版本<br>依次安装udev-rules dkms 和其他的软件包</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get install librealsense2-udev-rules:amd64=2.50.0-0~realsense0.6127<br>sudo apt-get install librealsense2-dkms=1.3.13-0ubuntu1<br></code></pre></td></tr></table></figure><p>再安装其他的utils</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get insall librealsense2=2.50.0-0~realsense0.6127<br>sudo apt-get insall librealsense2-gl=2.50.0-0~realsense0.6127<br>sudo apt-get insall librealsense2-net=2.50.0-0~realsense0.6127<br>sudo apt-get insall librealsense2-utils=2.50.0-0~realsense0.6127<br>sudo apt-get insall librealsense2-dev=2.50.0-0~realsense0.6127<br>sudo apt-get insall librealsense2-dbg=2.50.0-0~realsense0.6127<br></code></pre></td></tr></table></figure><p>安装完成后直接在控制台输入<code>realsense-viewer</code>打开软件，接入摄像头即可查看不同传感器的数据，还可以在3D页面预览深度效果  </p><h2 id="RTAB-MAP-1"><a href="#RTAB-MAP-1" class="headerlink" title="RTAB-MAP"></a>RTAB-MAP</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>直接参照RTABMAP_ROS <a href="https://github.com/introlab/rtabmap_ros#rtabmap_ros">wiki 页面</a>  </p><h3 id="建图"><a href="#建图" class="headerlink" title="建图"></a>建图</h3><p>查看rtabmap_ros的launch文件可以发现，每次启动的时候都需要去指定订阅的话题，以及一部分ros相关的参数，例如是否启动rviz，深度是否和RGB对齐等相关参数，具体的内容如下  </p><h4 id="如果只使用D435-D415"><a href="#如果只使用D435-D415" class="headerlink" title="如果只使用D435&#x2F;D415"></a><strong>如果只使用D435&#x2F;D415</strong></h4><p>首先是启动realsenseros节点,其中的参数就是指把RGB和深度进行对齐，这样会多输出一个对齐后的topic</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch realsense2_camera rs_camera.launch align_depth:=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>这个launch文件不会启用相机内的IMU功能，把相机当做纯RGBD相机使用，因此接下来使用RTABMAP时，需要启用视觉里程计算法。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch rtabmap_launch rtabmap.launch \<br>    rtabmap_args:=<span class="hljs-string">&quot;--delete_db_on_start&quot;</span> \<br>    depth_topic:=/camera/aligned_depth_to_color/image_raw \<br>    rgb_topic:=/camera/color/image_raw \<br>    camera_info_topic:=/camera/color/camera_info \<br>    approx_sync:=<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>建议测试完成后直接修改对应的launch文件，直接包含两个launch文件并修改参数，直接一键启动<br>参数的功能直接去看rtabmap_ros的.launch和他们的wiki，注释写的很详细</p><h4 id="启动D435i-L515的IMU"><a href="#启动D435i-L515的IMU" class="headerlink" title="启动D435i&#x2F;L515的IMU"></a>启动D435i&#x2F;L515的IMU</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch realsense2_camera rs_camera.launch \<br>    align_depth:=<span class="hljs-literal">true</span> \<br>    unite_imu_method:=<span class="hljs-string">&quot;linear_interpolation&quot;</span> \<br>    enable_gyro:=<span class="hljs-literal">true</span> \<br>    enable_accel:=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>为了把IMU数据转换成rtabmap可以订阅的格式，我们使用另外一个节点</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">rosrun imu_filter_madgwick imu_filter_node \<br>    _use_mag:=<span class="hljs-literal">false</span> \<br>    _publish_tf:=<span class="hljs-literal">false</span> \<br>    _world_frame:=<span class="hljs-string">&quot;enu&quot;</span> \<br>    /imu/data_raw:=/camera/imu \<br>    /imu/data:=/rtabmap/imu<br></code></pre></td></tr></table></figure><p>随后启动rtabmap建图</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">rtabmap_args:=<span class="hljs-string">&quot;--delete_db_on_start --Optimizer/GravitySigma 0.3&quot;</span> \<br>   depth_topic:=/camera/aligned_depth_to_color/image_raw \<br>   rgb_topic:=/camera/color/image_raw \<br>   camera_info_topic:=/camera/color/camera_info \<br>   approx_sync:=<span class="hljs-literal">false</span> \<br>   wait_imu_to_init:=<span class="hljs-literal">true</span> \<br>   imu_topic:=/rtabmap/imu<br></code></pre></td></tr></table></figure><h4 id="使用D400-L515-T265外置里程计"><a href="#使用D400-L515-T265外置里程计" class="headerlink" title="使用D400&#x2F;L515+T265外置里程计"></a>使用D400&#x2F;L515+T265外置里程计</h4><p>realsense内置了对应的launch文件，</p><blockquote><p><strong>请注意</strong>：<em>在使用launch文件之前，请使用rs_camera.launch单独打开每一个设备，在控制台的log中查看相机的SN，然后将对应的SN填入launch文件的arg中</em><br><strong>请确保使用了官方的3D打印支架，如果二者之间的几何关系发生改变，请编辑launch文件中的TFNode启动参数，从而确保相机坐标转换的正确</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch realsense2_camera rs_d400_and_t265.launch<br></code></pre></td></tr></table></figure><p>由于T265会自己计算里程计，因此不再需要启用视觉里程计算法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch rtabmap_launch rtabmap.launch \<br>   args:=<span class="hljs-string">&quot;-d --Mem/UseOdomGravity true --Optimizer/GravitySigma 0.3&quot;</span> \<br>   odom_topic:=/t265/odom/sample \<br>   frame_id:=t265_link \<br>   rgbd_sync:=<span class="hljs-literal">true</span> \<br>   depth_topic:=/d400/aligned_depth_to_color/image_raw \<br>   rgb_topic:=/d400/color/image_raw \<br>   camera_info_topic:=/d400/color/camera_info \<br>   approx_rgbd_sync:=<span class="hljs-literal">false</span> \<br>   visual_odometry:=<span class="hljs-literal">false</span> \<br>   queue_size:=30<br></code></pre></td></tr></table></figure><p>你可以编写自己的launch文件，把上述需要更改的参数都丢进去，甚至可以参照rtabmap官方的ini文件，更改mapping的各种参数，然后启动的时候自动加载<br>例如下方的launch文件，参考rtabmap官方的launch文件，知道载入一个.ini文件既可以设定好mapping的参数，所以参照了rtabmap修改参数apply时控制台的输出，添加对应参数到.ini的[Core]下即可</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">launch</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;device_type_camera1&quot;</span>    <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;t265&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;device_type_camera2&quot;</span>    <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;d435&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;serial_no_camera1&quot;</span>      <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;serial_no_camera2&quot;</span>      <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;camera1&quot;</span>                <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;t265&quot;</span>/&gt;</span>  <span class="hljs-comment">&lt;!-- <span class="hljs-doctag">Note:</span> Replace with camera name --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;camera2&quot;</span>                <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;d400&quot;</span>/&gt;</span>  <span class="hljs-comment">&lt;!-- <span class="hljs-doctag">Note:</span> Replace with camera name --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clip_distance&quot;</span>          <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;-2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;use_rviz&quot;</span>               <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;use_rtabmapviz&quot;</span>         <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">file</span>=<span class="hljs-string">&quot;$(find realsense2_camera)/launch/rs_d400_and_t265.launch&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;device_type_camera1&quot;</span>             <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg device_type_camera1)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;device_type_camera2&quot;</span>             <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg device_type_camera2)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;serial_no_camera1&quot;</span>               <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg serial_no_camera1)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;serial_no_camera2&quot;</span>               <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg serial_no_camera2)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;camera1&quot;</span>                         <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg camera1)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;camera2&quot;</span>                         <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg camera2)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;clip_distance&quot;</span>                   <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg clip_distance)&quot;</span>/&gt;</span><br>            <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">file</span>=<span class="hljs-string">&quot;$(find rtabmap_ros)/launch/rtabmap.launch&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rtabmap_args&quot;</span>       <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;--delete_db_on_start&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;depth_topic&quot;</span>        <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/$(arg camera2)/aligned_depth_to_color/image_raw&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;frame_id&quot;</span>           <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg camera2)_link&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cfg&quot;</span>                <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(find realsense2_camera)/launch/cfg/slam.ini&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;visual_odometry&quot;</span>    <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;odom_topic&quot;</span>         <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/$(arg camera1)/odom/sample&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rgb_topic&quot;</span>          <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/$(arg camera2)/color/image_raw&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;camera_info_topic&quot;</span>  <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/$(arg camera2)/color/camera_info&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;queue_size&quot;</span>         <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;200&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rviz&quot;</span>               <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg use_rviz)&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;rtabmapviz&quot;</span>         <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$(arg use_rtabmapviz)&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">launch</span>&gt;</span><br></code></pre></td></tr></table></figure><p>随后是.ini文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Core]</span><br><span class="hljs-attr">Version</span> = <span class="hljs-number">0.20</span>.<span class="hljs-number">23</span><br>BRIEF\<span class="hljs-attr">Bytes</span> = <span class="hljs-number">32</span><br>BRISK\<span class="hljs-attr">Octaves</span> = <span class="hljs-number">3</span><br>BRISK\<span class="hljs-attr">PatternScale</span> = <span class="hljs-number">1</span><br>BRISK\<span class="hljs-attr">Thresh</span> = <span class="hljs-number">30</span><br>Bayes\<span class="hljs-attr">FullPredictionUpdate</span> = <span class="hljs-literal">false</span><br>Bayes\<span class="hljs-attr">PredictionLC</span> = <span class="hljs-number">0.1</span> <span class="hljs-number">0.36</span> <span class="hljs-number">0.30</span> <span class="hljs-number">0.16</span> <span class="hljs-number">0.062</span> <span class="hljs-number">0.0151</span> <span class="hljs-number">0.00255</span> <span class="hljs-number">0.000324</span> <span class="hljs-number">2.5</span>e-<span class="hljs-number">05</span> <span class="hljs-number">1.3</span>e-<span class="hljs-number">06</span> <span class="hljs-number">4.8</span>e-<span class="hljs-number">08</span> <span class="hljs-number">1.2</span>e-<span class="hljs-number">09</span> <span class="hljs-number">1.9</span>e-<span class="hljs-number">11</span> <span class="hljs-number">2.2</span>e-<span class="hljs-number">13</span> <span class="hljs-number">1.7</span>e-<span class="hljs-number">15</span> <span class="hljs-number">8.5</span>e-<span class="hljs-number">18</span> <span class="hljs-number">2.9</span>e-<span class="hljs-number">20</span> <span class="hljs-number">6.9</span>e-<span class="hljs-number">23</span><br>Bayes\<span class="hljs-attr">VirtualPlacePriorThr</span> = <span class="hljs-number">0.9</span><br>Db\<span class="hljs-attr">TargetVersion</span> = <br>DbSqlite3\<span class="hljs-attr">CacheSize</span> = <span class="hljs-number">10000</span><br>DbSqlite3\<span class="hljs-attr">InMemory</span> = <span class="hljs-literal">false</span><br>DbSqlite3\<span class="hljs-attr">JournalMode</span> = <span class="hljs-number">3</span><br>DbSqlite3\<span class="hljs-attr">Synchronous</span> = <span class="hljs-number">0</span><br>DbSqlite3\<span class="hljs-attr">TempStore</span> = <span class="hljs-number">2</span><br>FAST\<span class="hljs-attr">CV</span> = <span class="hljs-number">0</span><br>FAST\<span class="hljs-attr">Gpu</span> = <span class="hljs-literal">false</span><br>FAST\<span class="hljs-attr">GpuKeypointsRatio</span> = <span class="hljs-number">0.05</span><br>FAST\<span class="hljs-attr">GridCols</span> = <span class="hljs-number">0</span><br>FAST\<span class="hljs-attr">GridRows</span> = <span class="hljs-number">0</span><br>FAST\<span class="hljs-attr">MaxThreshold</span> = <span class="hljs-number">200</span><br>FAST\<span class="hljs-attr">MinThreshold</span> = <span class="hljs-number">7</span><br>FAST\<span class="hljs-attr">NonmaxSuppression</span> = <span class="hljs-literal">true</span><br>FAST\<span class="hljs-attr">Threshold</span> = <span class="hljs-number">20</span><br>FREAK\<span class="hljs-attr">NOctaves</span> = <span class="hljs-number">4</span><br>FREAK\<span class="hljs-attr">OrientationNormalized</span> = <span class="hljs-literal">true</span><br>FREAK\<span class="hljs-attr">PatternScale</span> = <span class="hljs-number">22</span><br>FREAK\<span class="hljs-attr">ScaleNormalized</span> = <span class="hljs-literal">true</span><br>GFTT\<span class="hljs-attr">BlockSize</span> = <span class="hljs-number">3</span><br>GFTT\<span class="hljs-attr">K</span> = <span class="hljs-number">0.04</span><br>GFTT\<span class="hljs-attr">MinDistance</span> = <span class="hljs-number">7</span><br>GFTT\<span class="hljs-attr">QualityLevel</span> = <span class="hljs-number">0.001</span><br>GFTT\<span class="hljs-attr">UseHarrisDetector</span> = <span class="hljs-literal">false</span><br>GMS\<span class="hljs-attr">ThresholdFactor</span> = <span class="hljs-number">6.0</span><br>GMS\<span class="hljs-attr">WithRotation</span> = <span class="hljs-literal">false</span><br>GMS\<span class="hljs-attr">WithScale</span> = <span class="hljs-literal">false</span><br>GTSAM\<span class="hljs-attr">Optimizer</span> = <span class="hljs-number">1</span><br>Grid\<span class="hljs-attr">3D</span> = <span class="hljs-literal">true</span><br>Grid\<span class="hljs-attr">CellSize</span> = <span class="hljs-number">0.05</span><br>Grid\<span class="hljs-attr">ClusterRadius</span> = <span class="hljs-number">0.1</span><br>Grid\<span class="hljs-attr">DepthDecimation</span> = <span class="hljs-number">4</span><br>Grid\<span class="hljs-attr">DepthRoiRatios</span> = <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">FlatObstacleDetected</span> = <span class="hljs-literal">true</span><br>Grid\<span class="hljs-attr">FootprintHeight</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">FootprintLength</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">FootprintWidth</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">GroundIsObstacle</span> = <span class="hljs-literal">false</span><br>Grid\<span class="hljs-attr">MapFrameProjection</span> = <span class="hljs-literal">false</span><br>Grid\<span class="hljs-attr">MaxGroundAngle</span> = <span class="hljs-number">45</span><br>Grid\<span class="hljs-attr">MaxGroundHeight</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">MaxObstacleHeight</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">MinClusterSize</span> = <span class="hljs-number">10</span><br>Grid\<span class="hljs-attr">MinGroundHeight</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">NoiseFilteringMinNeighbors</span> = <span class="hljs-number">5</span><br>Grid\<span class="hljs-attr">NoiseFilteringRadius</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">NormalK</span> = <span class="hljs-number">20</span><br>Grid\<span class="hljs-attr">NormalsSegmentation</span> = <span class="hljs-literal">true</span><br>Grid\<span class="hljs-attr">PreVoxelFiltering</span> = <span class="hljs-literal">true</span><br>Grid\<span class="hljs-attr">RangeMax</span> = <span class="hljs-number">5.0</span><br>Grid\<span class="hljs-attr">RangeMin</span> = <span class="hljs-number">0.0</span><br>Grid\<span class="hljs-attr">RayTracing</span> = <span class="hljs-literal">false</span><br>Grid\<span class="hljs-attr">Scan2dUnknownSpaceFilled</span> = <span class="hljs-literal">false</span><br>Grid\<span class="hljs-attr">ScanDecimation</span> = <span class="hljs-number">1</span><br>Grid\<span class="hljs-attr">Sensor</span> = <span class="hljs-number">1</span><br>GridGlobal\<span class="hljs-attr">AltitudeDelta</span> = <span class="hljs-number">0</span><br>GridGlobal\<span class="hljs-attr">Eroded</span> = <span class="hljs-literal">false</span><br>GridGlobal\<span class="hljs-attr">FloodFillDepth</span> = <span class="hljs-number">0</span><br>GridGlobal\<span class="hljs-attr">FootprintRadius</span> = <span class="hljs-number">0.0</span><br>GridGlobal\<span class="hljs-attr">FullUpdate</span> = <span class="hljs-literal">true</span><br>GridGlobal\<span class="hljs-attr">MaxNodes</span> = <span class="hljs-number">0</span><br>GridGlobal\<span class="hljs-attr">MinSize</span> = <span class="hljs-number">0.0</span><br>GridGlobal\<span class="hljs-attr">OccupancyThr</span> = <span class="hljs-number">0.5</span><br>GridGlobal\<span class="hljs-attr">ProbClampingMax</span> = <span class="hljs-number">0.971</span><br>GridGlobal\<span class="hljs-attr">ProbClampingMin</span> = <span class="hljs-number">0.1192</span><br>GridGlobal\<span class="hljs-attr">ProbHit</span> = <span class="hljs-number">0.7</span><br>GridGlobal\<span class="hljs-attr">ProbMiss</span> = <span class="hljs-number">0.4</span><br>GridGlobal\<span class="hljs-attr">UpdateError</span> = <span class="hljs-number">0.01</span><br>Icp\<span class="hljs-attr">CCFilterOutFarthestPoints</span> = <span class="hljs-literal">false</span><br>Icp\<span class="hljs-attr">CCMaxFinalRMS</span> = <span class="hljs-number">0.2</span><br>Icp\<span class="hljs-attr">CCSamplingLimit</span> = <span class="hljs-number">50000</span><br>Icp\<span class="hljs-attr">CorrespondenceRatio</span> = <span class="hljs-number">0.1</span><br>Icp\<span class="hljs-attr">DebugExportFormat</span> = <br>Icp\<span class="hljs-attr">DownsamplingStep</span> = <span class="hljs-number">1</span><br>Icp\<span class="hljs-attr">Epsilon</span> = <span class="hljs-number">0</span><br>Icp\<span class="hljs-attr">Force4DoF</span> = <span class="hljs-literal">false</span><br>Icp\<span class="hljs-attr">Iterations</span> = <span class="hljs-number">30</span><br>Icp\<span class="hljs-attr">MaxCorrespondenceDistance</span> = <span class="hljs-number">0.1</span><br>Icp\<span class="hljs-attr">MaxRotation</span> = <span class="hljs-number">0.78</span><br>Icp\<span class="hljs-attr">MaxTranslation</span> = <span class="hljs-number">0.2</span><br>Icp\<span class="hljs-attr">OutlierRatio</span> = <span class="hljs-number">0.85</span><br>Icp\<span class="hljs-attr">PMConfig</span> = <br>Icp\<span class="hljs-attr">PMMatcherEpsilon</span> = <span class="hljs-number">0.0</span><br>Icp\<span class="hljs-attr">PMMatcherIntensity</span> = <span class="hljs-literal">false</span><br>Icp\<span class="hljs-attr">PMMatcherKnn</span> = <span class="hljs-number">1</span><br>Icp\<span class="hljs-attr">PointToPlane</span> = <span class="hljs-literal">true</span><br>Icp\<span class="hljs-attr">PointToPlaneGroundNormalsUp</span> = <span class="hljs-number">0.0</span><br>Icp\<span class="hljs-attr">PointToPlaneK</span> = <span class="hljs-number">5</span><br>Icp\<span class="hljs-attr">PointToPlaneLowComplexityStrategy</span> = <span class="hljs-number">1</span><br>Icp\<span class="hljs-attr">PointToPlaneMinComplexity</span> = <span class="hljs-number">0.02</span><br>Icp\<span class="hljs-attr">PointToPlaneRadius</span> = <span class="hljs-number">0.0</span><br>Icp\<span class="hljs-attr">RangeMax</span> = <span class="hljs-number">0</span><br>Icp\<span class="hljs-attr">RangeMin</span> = <span class="hljs-number">0</span><br>Icp\<span class="hljs-attr">Strategy</span> = <span class="hljs-number">1</span><br>Icp\<span class="hljs-attr">VoxelSize</span> = <span class="hljs-number">0.05</span><br>ImuFilter\<span class="hljs-attr">ComplementaryBiasAlpha</span> = <span class="hljs-number">0.01</span><br>ImuFilter\<span class="hljs-attr">ComplementaryDoAdpativeGain</span> = <span class="hljs-literal">true</span><br>ImuFilter\<span class="hljs-attr">ComplementaryDoBiasEstimation</span> = <span class="hljs-literal">true</span><br>ImuFilter\<span class="hljs-attr">ComplementaryGainAcc</span> = <span class="hljs-number">0.01</span><br>ImuFilter\<span class="hljs-attr">MadgwickGain</span> = <span class="hljs-number">0.1</span><br>ImuFilter\<span class="hljs-attr">MadgwickZeta</span> = <span class="hljs-number">0.0</span><br>KAZE\<span class="hljs-attr">Diffusivity</span> = <span class="hljs-number">1</span><br>KAZE\<span class="hljs-attr">Extended</span> = <span class="hljs-literal">false</span><br>KAZE\<span class="hljs-attr">NOctaveLayers</span> = <span class="hljs-number">4</span><br>KAZE\<span class="hljs-attr">NOctaves</span> = <span class="hljs-number">4</span><br>KAZE\<span class="hljs-attr">Threshold</span> = <span class="hljs-number">0.001</span><br>KAZE\<span class="hljs-attr">Upright</span> = <span class="hljs-literal">false</span><br>Kp\<span class="hljs-attr">BadSignRatio</span> = <span class="hljs-number">0.5</span><br>Kp\<span class="hljs-attr">ByteToFloat</span> = <span class="hljs-literal">false</span><br>Kp\<span class="hljs-attr">DetectorStrategy</span> = <span class="hljs-number">8</span><br>Kp\<span class="hljs-attr">DictionaryPath</span> = <br>Kp\<span class="hljs-attr">FlannRebalancingFactor</span> = <span class="hljs-number">2.0</span><br>Kp\<span class="hljs-attr">GridCols</span> = <span class="hljs-number">1</span><br>Kp\<span class="hljs-attr">GridRows</span> = <span class="hljs-number">1</span><br>Kp\<span class="hljs-attr">IncrementalDictionary</span> = <span class="hljs-literal">true</span><br>Kp\<span class="hljs-attr">IncrementalFlann</span> = <span class="hljs-literal">true</span><br>Kp\<span class="hljs-attr">MaxDepth</span> = <span class="hljs-number">0</span><br>Kp\<span class="hljs-attr">MaxFeatures</span> = <span class="hljs-number">500</span><br>Kp\<span class="hljs-attr">MinDepth</span> = <span class="hljs-number">0</span><br>Kp\<span class="hljs-attr">NNStrategy</span> = <span class="hljs-number">1</span><br>Kp\<span class="hljs-attr">NewWordsComparedTogether</span> = <span class="hljs-literal">true</span><br>Kp\<span class="hljs-attr">NndrRatio</span> = <span class="hljs-number">0.8</span><br>Kp\<span class="hljs-attr">Parallelized</span> = <span class="hljs-literal">true</span><br>Kp\<span class="hljs-attr">RoiRatios</span> = <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span><br>Kp\<span class="hljs-attr">SubPixEps</span> = <span class="hljs-number">0.02</span><br>Kp\<span class="hljs-attr">SubPixIterations</span> = <span class="hljs-number">0</span><br>Kp\<span class="hljs-attr">SubPixWinSize</span> = <span class="hljs-number">3</span><br>Kp\<span class="hljs-attr">TfIdfLikelihoodUsed</span> = <span class="hljs-literal">true</span><br>Marker\<span class="hljs-attr">CornerRefinementMethod</span> = <span class="hljs-number">0</span><br>Marker\<span class="hljs-attr">Dictionary</span> = <span class="hljs-number">0</span><br>Marker\<span class="hljs-attr">Length</span> = <span class="hljs-number">0</span><br>Marker\<span class="hljs-attr">MaxDepthError</span> = <span class="hljs-number">0.01</span><br>Marker\<span class="hljs-attr">MaxRange</span> = <span class="hljs-number">0.0</span><br>Marker\<span class="hljs-attr">MinRange</span> = <span class="hljs-number">0.0</span><br>Marker\<span class="hljs-attr">Priors</span> = <br>Marker\<span class="hljs-attr">PriorsVarianceAngular</span> = <span class="hljs-number">0.001</span><br>Marker\<span class="hljs-attr">PriorsVarianceLinear</span> = <span class="hljs-number">0.001</span><br>Marker\<span class="hljs-attr">VarianceAngular</span> = <span class="hljs-number">0.01</span><br>Marker\<span class="hljs-attr">VarianceLinear</span> = <span class="hljs-number">0.001</span><br>Mem\<span class="hljs-attr">BadSignaturesIgnored</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">BinDataKept</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">CompressionParallelized</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">CovOffDiagIgnored</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">DepthAsMask</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">GenerateIds</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">ImageCompressionFormat</span> = .jpg<br>Mem\<span class="hljs-attr">ImageKept</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">ImagePostDecimation</span> = <span class="hljs-number">1</span><br>Mem\<span class="hljs-attr">ImagePreDecimation</span> = <span class="hljs-number">1</span><br>Mem\<span class="hljs-attr">IncrementalMemory</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">InitWMWithAllNodes</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">IntermediateNodeDataKept</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">LaserScanDownsampleStepSize</span> = <span class="hljs-number">1</span><br>Mem\<span class="hljs-attr">LaserScanNormalK</span> = <span class="hljs-number">0</span><br>Mem\<span class="hljs-attr">LaserScanNormalRadius</span> = <span class="hljs-number">0.0</span><br>Mem\<span class="hljs-attr">LaserScanVoxelSize</span> = <span class="hljs-number">0.0</span><br>Mem\<span class="hljs-attr">LocalizationDataSaved</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">MapLabelsAdded</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">NotLinkedNodesKept</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">RawDescriptorsKept</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">RecentWmRatio</span> = <span class="hljs-number">0.2</span><br>Mem\<span class="hljs-attr">ReduceGraph</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">RehearsalIdUpdatedToNewOne</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">RehearsalSimilarity</span> = <span class="hljs-number">0.6</span><br>Mem\<span class="hljs-attr">RehearsalWeightIgnoredWhileMoving</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">STMSize</span> = <span class="hljs-number">10</span><br>Mem\<span class="hljs-attr">SaveDepth16Format</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">StereoFromMotion</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">TransferSortingByWeightId</span> = <span class="hljs-literal">false</span><br>Mem\<span class="hljs-attr">UseOdomFeatures</span> = <span class="hljs-literal">true</span><br>Mem\<span class="hljs-attr">UseOdomGravity</span> = <span class="hljs-literal">false</span><br>ORB\<span class="hljs-attr">EdgeThreshold</span> = <span class="hljs-number">19</span><br>ORB\<span class="hljs-attr">FirstLevel</span> = <span class="hljs-number">0</span><br>ORB\<span class="hljs-attr">Gpu</span> = <span class="hljs-literal">false</span><br>ORB\<span class="hljs-attr">NLevels</span> = <span class="hljs-number">3</span><br>ORB\<span class="hljs-attr">PatchSize</span> = <span class="hljs-number">31</span><br>ORB\<span class="hljs-attr">ScaleFactor</span> = <span class="hljs-number">2</span><br>ORB\<span class="hljs-attr">ScoreType</span> = <span class="hljs-number">0</span><br>ORB\<span class="hljs-attr">WTA_K</span> = <span class="hljs-number">2</span><br>Optimizer\<span class="hljs-attr">Epsilon</span> = <span class="hljs-number">0.0</span><br>Optimizer\<span class="hljs-attr">GravitySigma</span> = <span class="hljs-number">0.3</span><br>Optimizer\<span class="hljs-attr">Iterations</span> = <span class="hljs-number">20</span><br>Optimizer\<span class="hljs-attr">LandmarksIgnored</span> = <span class="hljs-literal">false</span><br>Optimizer\<span class="hljs-attr">PriorsIgnored</span> = <span class="hljs-literal">true</span><br>Optimizer\<span class="hljs-attr">Robust</span> = <span class="hljs-literal">false</span><br>Optimizer\<span class="hljs-attr">Strategy</span> = <span class="hljs-number">1</span><br>Optimizer\<span class="hljs-attr">VarianceIgnored</span> = <span class="hljs-literal">false</span><br>PyDetector\<span class="hljs-attr">Cuda</span> = <span class="hljs-literal">true</span><br>PyDetector\<span class="hljs-attr">Path</span> = <br>PyMatcher\<span class="hljs-attr">Cuda</span> = <span class="hljs-literal">true</span><br>PyMatcher\<span class="hljs-attr">Iterations</span> = <span class="hljs-number">20</span><br>PyMatcher\<span class="hljs-attr">Model</span> = indoor<br>PyMatcher\<span class="hljs-attr">Path</span> = <br>PyMatcher\<span class="hljs-attr">Threshold</span> = <span class="hljs-number">0.2</span><br>RGBD\<span class="hljs-attr">AngularSpeedUpdate</span> = <span class="hljs-number">0.0</span><br>RGBD\<span class="hljs-attr">AngularUpdate</span> = <span class="hljs-number">0.1</span><br>RGBD\<span class="hljs-attr">CreateOccupancyGrid</span> = <span class="hljs-literal">true</span><br>RGBD\<span class="hljs-attr">Enabled</span> = <span class="hljs-literal">true</span><br>RGBD\<span class="hljs-attr">GoalReachedRadius</span> = <span class="hljs-number">0.5</span><br>RGBD\<span class="hljs-attr">GoalsSavedInUserData</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">InvertedReg</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">LinearSpeedUpdate</span> = <span class="hljs-number">0.0</span><br>RGBD\<span class="hljs-attr">LinearUpdate</span> = <span class="hljs-number">0.1</span><br>RGBD\<span class="hljs-attr">LocalBundleOnLoopClosure</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">LocalImmunizationRatio</span> = <span class="hljs-number">0.25</span><br>RGBD\<span class="hljs-attr">LocalRadius</span> = <span class="hljs-number">10</span><br>RGBD\<span class="hljs-attr">LoopClosureIdentityGuess</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">LoopClosureReextractFeatures</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">LoopCovLimited</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">MarkerDetection</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">MaxLocalRetrieved</span> = <span class="hljs-number">2</span><br>RGBD\<span class="hljs-attr">MaxLoopClosureDistance</span> = <span class="hljs-number">0.0</span><br>RGBD\<span class="hljs-attr">MaxOdomCacheSize</span> = <span class="hljs-number">10</span><br>RGBD\<span class="hljs-attr">NeighborLinkRefining</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">NewMapOdomChangeDistance</span> = <span class="hljs-number">0</span><br>RGBD\<span class="hljs-attr">OptimizeMaxError</span> = <span class="hljs-number">0.0</span><br>RGBD\<span class="hljs-attr">OptimizeFromGraphEnd</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">PlanAngularVelocity</span> = <span class="hljs-number">0</span><br>RGBD\<span class="hljs-attr">PlanLinearVelocity</span> = <span class="hljs-number">0</span><br>RGBD\<span class="hljs-attr">PlanStuckIterations</span> = <span class="hljs-number">0</span><br>RGBD\<span class="hljs-attr">ProximityAngle</span> = <span class="hljs-number">45</span><br>RGBD\<span class="hljs-attr">ProximityBySpace</span> = <span class="hljs-literal">true</span><br>RGBD\<span class="hljs-attr">ProximityByTime</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">ProximityGlobalScanMap</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">ProximityMaxGraphDepth</span> = <span class="hljs-number">50</span><br>RGBD\<span class="hljs-attr">ProximityMaxPaths</span> = <span class="hljs-number">3</span><br>RGBD\<span class="hljs-attr">ProximityMergedScanCovFactor</span> = <span class="hljs-number">100.0</span><br>RGBD\<span class="hljs-attr">ProximityOdomGuess</span> = <span class="hljs-literal">false</span><br>RGBD\<span class="hljs-attr">ProximityPathFilteringRadius</span> = <span class="hljs-number">1</span><br>RGBD\<span class="hljs-attr">ProximityPathMaxNeighbors</span> = <span class="hljs-number">0</span><br>RGBD\<span class="hljs-attr">ProximityPathRawPosesUsed</span> = <span class="hljs-literal">true</span><br>RGBD\<span class="hljs-attr">ScanMatchingIdsSavedInLinks</span> = <span class="hljs-literal">true</span><br>RGBD\<span class="hljs-attr">StartAtOrigin</span> = <span class="hljs-literal">false</span><br>Reg\<span class="hljs-attr">Force3DoF</span> = <span class="hljs-literal">false</span><br>Reg\<span class="hljs-attr">RepeatOnce</span> = <span class="hljs-literal">true</span><br>Reg\<span class="hljs-attr">Strategy</span> = <span class="hljs-number">0</span><br>Rtabmap\<span class="hljs-attr">ComputeRMSE</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">CreateIntermediateNodes</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">DetectionRate</span> = <span class="hljs-number">2</span><br>Rtabmap\<span class="hljs-attr">ImageBufferSize</span> = <span class="hljs-number">1</span><br>Rtabmap\<span class="hljs-attr">ImagesAlreadyRectified</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">LoopGPS</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">LoopRatio</span> = <span class="hljs-number">0</span><br>Rtabmap\<span class="hljs-attr">LoopThr</span> = <span class="hljs-number">0.11</span><br>Rtabmap\<span class="hljs-attr">MaxRepublished</span> = <span class="hljs-number">2</span><br>Rtabmap\<span class="hljs-attr">MaxRetrieved</span> = <span class="hljs-number">2</span><br>Rtabmap\<span class="hljs-attr">MemoryThr</span> = <span class="hljs-number">0</span><br>Rtabmap\<span class="hljs-attr">PublishLastSignature</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">PublishLikelihood</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">PublishPdf</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">PublishRAMUsage</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">PublishStats</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">RectifyOnlyFeatures</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">SaveWMState</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">StartNewMapOnGoodSignature</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">StartNewMapOnLoopClosure</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">StatisticLogged</span> = <span class="hljs-literal">false</span><br>Rtabmap\<span class="hljs-attr">StatisticLoggedHeaders</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">StatisticLogsBufferedInRAM</span> = <span class="hljs-literal">true</span><br>Rtabmap\<span class="hljs-attr">TimeThr</span> = <span class="hljs-number">0</span><br>Rtabmap\<span class="hljs-attr">WorkingDirectory</span> = /home/asudct/.ros<br>SIFT\<span class="hljs-attr">ContrastThreshold</span> = <span class="hljs-number">0.04</span><br>SIFT\<span class="hljs-attr">EdgeThreshold</span> = <span class="hljs-number">10</span><br>SIFT\<span class="hljs-attr">NFeatures</span> = <span class="hljs-number">0</span><br>SIFT\<span class="hljs-attr">NOctaveLayers</span> = <span class="hljs-number">3</span><br>SIFT\<span class="hljs-attr">RootSIFT</span> = <span class="hljs-literal">false</span><br>SIFT\<span class="hljs-attr">Sigma</span> = <span class="hljs-number">1.6</span><br>SURF\<span class="hljs-attr">Extended</span> = <span class="hljs-literal">false</span><br>SURF\<span class="hljs-attr">GpuKeypointsRatio</span> = <span class="hljs-number">0.01</span><br>SURF\<span class="hljs-attr">GpuVersion</span> = <span class="hljs-literal">false</span><br>SURF\<span class="hljs-attr">HessianThreshold</span> = <span class="hljs-number">500</span><br>SURF\<span class="hljs-attr">OctaveLayers</span> = <span class="hljs-number">2</span><br>SURF\<span class="hljs-attr">Octaves</span> = <span class="hljs-number">4</span><br>SURF\<span class="hljs-attr">Upright</span> = <span class="hljs-literal">false</span><br>Stereo\<span class="hljs-attr">DenseStrategy</span> = <span class="hljs-number">0</span><br>Stereo\<span class="hljs-attr">Eps</span> = <span class="hljs-number">0.01</span><br>Stereo\<span class="hljs-attr">Iterations</span> = <span class="hljs-number">30</span><br>Stereo\<span class="hljs-attr">MaxDisparity</span> = <span class="hljs-number">128.0</span><br>Stereo\<span class="hljs-attr">MaxLevel</span> = <span class="hljs-number">5</span><br>Stereo\<span class="hljs-attr">MinDisparity</span> = <span class="hljs-number">0.5</span><br>Stereo\<span class="hljs-attr">OpticalFlow</span> = <span class="hljs-literal">true</span><br>Stereo\<span class="hljs-attr">SSD</span> = <span class="hljs-literal">true</span><br>Stereo\<span class="hljs-attr">WinHeight</span> = <span class="hljs-number">3</span><br>Stereo\<span class="hljs-attr">WinWidth</span> = <span class="hljs-number">15</span><br>StereoBM\<span class="hljs-attr">BlockSize</span> = <span class="hljs-number">15</span><br>StereoBM\<span class="hljs-attr">Disp12MaxDiff</span> = -<span class="hljs-number">1</span><br>StereoBM\<span class="hljs-attr">MinDisparity</span> = <span class="hljs-number">0</span><br>StereoBM\<span class="hljs-attr">NumDisparities</span> = <span class="hljs-number">128</span><br>StereoBM\<span class="hljs-attr">PreFilterCap</span> = <span class="hljs-number">31</span><br>StereoBM\<span class="hljs-attr">PreFilterSize</span> = <span class="hljs-number">9</span><br>StereoBM\<span class="hljs-attr">SpeckleRange</span> = <span class="hljs-number">4</span><br>StereoBM\<span class="hljs-attr">SpeckleWindowSize</span> = <span class="hljs-number">100</span><br>StereoBM\<span class="hljs-attr">TextureThreshold</span> = <span class="hljs-number">10</span><br>StereoBM\<span class="hljs-attr">UniquenessRatio</span> = <span class="hljs-number">15</span><br>StereoSGBM\<span class="hljs-attr">BlockSize</span> = <span class="hljs-number">15</span><br>StereoSGBM\<span class="hljs-attr">Disp12MaxDiff</span> = <span class="hljs-number">1</span><br>StereoSGBM\<span class="hljs-attr">MinDisparity</span> = <span class="hljs-number">0</span><br>StereoSGBM\<span class="hljs-attr">Mode</span> = <span class="hljs-number">2</span><br>StereoSGBM\<span class="hljs-attr">NumDisparities</span> = <span class="hljs-number">128</span><br>StereoSGBM\<span class="hljs-attr">P1</span> = <span class="hljs-number">2</span><br>StereoSGBM\<span class="hljs-attr">P2</span> = <span class="hljs-number">5</span><br>StereoSGBM\<span class="hljs-attr">PreFilterCap</span> = <span class="hljs-number">31</span><br>StereoSGBM\<span class="hljs-attr">SpeckleRange</span> = <span class="hljs-number">4</span><br>StereoSGBM\<span class="hljs-attr">SpeckleWindowSize</span> = <span class="hljs-number">100</span><br>StereoSGBM\<span class="hljs-attr">UniquenessRatio</span> = <span class="hljs-number">20</span><br>SuperPoint\<span class="hljs-attr">Cuda</span> = <span class="hljs-literal">true</span><br>SuperPoint\<span class="hljs-attr">ModelPath</span> = <br>SuperPoint\<span class="hljs-attr">NMS</span> = <span class="hljs-literal">true</span><br>SuperPoint\<span class="hljs-attr">NMSRadius</span> = <span class="hljs-number">4</span><br>SuperPoint\<span class="hljs-attr">Threshold</span> = <span class="hljs-number">0.010</span><br>VhEp\<span class="hljs-attr">Enabled</span> = <span class="hljs-literal">false</span><br>VhEp\<span class="hljs-attr">MatchCountMin</span> = <span class="hljs-number">8</span><br>VhEp\<span class="hljs-attr">RansacParam1</span> = <span class="hljs-number">3</span><br>VhEp\<span class="hljs-attr">RansacParam2</span> = <span class="hljs-number">0.99</span><br>Vis\<span class="hljs-attr">BundleAdjustment</span> = <span class="hljs-number">1</span><br>Vis\<span class="hljs-attr">CorFlowEps</span> = <span class="hljs-number">0.01</span><br>Vis\<span class="hljs-attr">CorFlowIterations</span> = <span class="hljs-number">30</span><br>Vis\<span class="hljs-attr">CorFlowMaxLevel</span> = <span class="hljs-number">3</span><br>Vis\<span class="hljs-attr">CorFlowWinSize</span> = <span class="hljs-number">16</span><br>Vis\<span class="hljs-attr">CorGuessMatchToProjection</span> = <span class="hljs-literal">false</span><br>Vis\<span class="hljs-attr">CorGuessWinSize</span> = <span class="hljs-number">40</span><br>Vis\<span class="hljs-attr">CorNNDR</span> = <span class="hljs-number">0.8</span><br>Vis\<span class="hljs-attr">CorNNType</span> = <span class="hljs-number">1</span><br>Vis\<span class="hljs-attr">CorType</span> = <span class="hljs-number">0</span><br>Vis\<span class="hljs-attr">DepthAsMask</span> = <span class="hljs-literal">true</span><br>Vis\<span class="hljs-attr">EpipolarGeometryVar</span> = <span class="hljs-number">0.1</span><br>Vis\<span class="hljs-attr">EstimationType</span> = <span class="hljs-number">1</span><br>Vis\<span class="hljs-attr">FeatureType</span> = <span class="hljs-number">8</span><br>Vis\<span class="hljs-attr">ForwardEstOnly</span> = <span class="hljs-literal">true</span><br>Vis\<span class="hljs-attr">GridCols</span> = <span class="hljs-number">1</span><br>Vis\<span class="hljs-attr">GridRows</span> = <span class="hljs-number">1</span><br>Vis\<span class="hljs-attr">InlierDistance</span> = <span class="hljs-number">0.1</span><br>Vis\<span class="hljs-attr">Iterations</span> = <span class="hljs-number">300</span><br>Vis\<span class="hljs-attr">MaxDepth</span> = <span class="hljs-number">0</span><br>Vis\<span class="hljs-attr">MaxFeatures</span> = <span class="hljs-number">1000</span><br>Vis\<span class="hljs-attr">MeanInliersDistance</span> = <span class="hljs-number">0.0</span><br>Vis\<span class="hljs-attr">MinDepth</span> = <span class="hljs-number">0</span><br>Vis\<span class="hljs-attr">MinInliers</span> = <span class="hljs-number">15</span><br>Vis\<span class="hljs-attr">MinInliersDistribution</span> = <span class="hljs-number">0.0</span><br>Vis\<span class="hljs-attr">PnPFlags</span> = <span class="hljs-number">0</span><br>Vis\<span class="hljs-attr">PnPMaxVariance</span> = <span class="hljs-number">0.0</span><br>Vis\<span class="hljs-attr">PnPRefineIterations</span> = <span class="hljs-number">0</span><br>Vis\<span class="hljs-attr">PnPReprojError</span> = <span class="hljs-number">2</span><br>Vis\<span class="hljs-attr">RefineIterations</span> = <span class="hljs-number">5</span><br>Vis\<span class="hljs-attr">RoiRatios</span> = <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span><br>Vis\<span class="hljs-attr">SubPixEps</span> = <span class="hljs-number">0.02</span><br>Vis\<span class="hljs-attr">SubPixIterations</span> = <span class="hljs-number">0</span><br>Vis\<span class="hljs-attr">SubPixWinSize</span> = <span class="hljs-number">3</span><br>g2o\<span class="hljs-attr">Baseline</span> = <span class="hljs-number">0.075</span><br>g2o\<span class="hljs-attr">Optimizer</span> = <span class="hljs-number">0</span><br>g2o\<span class="hljs-attr">PixelVariance</span> = <span class="hljs-number">1.0</span><br>g2o\<span class="hljs-attr">RobustKernelDelta</span> = <span class="hljs-number">8</span><br>g2o\<span class="hljs-attr">Solver</span> = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>其实有很多参数根本就没有修改，但是因为保存的时候会自动保存，也就无所谓了  </p><h3 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h3><p>为了保存建好的地图到2D Occupancy，我们需要使用map_server的map_saver 节点<br>在上述建图运行时</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rosrun map_server map_saver map:=/rtabmap/grid_map -f filename<br></code></pre></td></tr></table></figure><p>随后CTRL+C退出建图即可，rtabmap会自动保存database到.ros&#x2F;下，请进行备份<br>通过使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rtabmapdatabase-Viewer .ros/rtabmap.db<br></code></pre></td></tr></table></figure><p>就可以预览刚才建立的.db了，既可以导出3D点云，Octomap地图，也可以对2D地图进行编辑，修改，删除地图中因噪声产生的错误点位。</p><h3 id="重定位"><a href="#重定位" class="headerlink" title="重定位"></a>重定位</h3><p>只需要在之前的launch文件中添加</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">file</span>=<span class="hljs-string">&quot;$(find rtabmap_ros)/launch/rtabmap.launch&quot;</span>&gt;</span><br>...<br>        <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;localization&quot;</span>               <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>...<br>d<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br></code></pre></td></tr></table></figure><p>或者运行launch文件的时候使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">roslaunch rtabmap_launch rtabmap.launch localization:=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>即可开启定位</p><blockquote><p><strong>注意</strong>：<em>在使用定位的时候，尽量保证定位开始时，摄像头处于地图的起始位置，并且在节点启动时，不要让里程计有变化的输出值，不然会导致定位的漂移，需要重新启动定位才能解决</em><br>定位信息在<code>/rtabmap/localization_pose</code>topic内，里程计相对于地图的offset则在<code>/tf</code>中可以找到，根据之前保存的Occupancy地图和对应的yaml文件，就可以确定位置了。  </p></blockquote>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SLAM</tag>
      
      <tag>rtabmap</tag>
      
      <tag>realsense</tag>
      
      <tag>ROS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu下使用terminator或其他终端软件并替换默认终端和右键菜单</title>
    <link href="/2024/07/05/Ubuntu%E4%B8%8B%E4%BD%BF%E7%94%A8terminator%E6%88%96%E5%85%B6%E4%BB%96%E7%BB%88%E7%AB%AF%E8%BD%AF%E4%BB%B6%E5%B9%B6%E6%9B%BF%E6%8D%A2%E9%BB%98%E8%AE%A4%E7%BB%88%E7%AB%AF%E5%92%8C%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95/"/>
    <url>/2024/07/05/Ubuntu%E4%B8%8B%E4%BD%BF%E7%94%A8terminator%E6%88%96%E5%85%B6%E4%BB%96%E7%BB%88%E7%AB%AF%E8%BD%AF%E4%BB%B6%E5%B9%B6%E6%9B%BF%E6%8D%A2%E9%BB%98%E8%AE%A4%E7%BB%88%E7%AB%AF%E5%92%8C%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Ubuntu下使用terminator或其他终端软件并替换默认终端和右键菜单"><a href="#Ubuntu下使用terminator或其他终端软件并替换默认终端和右键菜单" class="headerlink" title="Ubuntu下使用terminator或其他终端软件并替换默认终端和右键菜单"></a>Ubuntu下使用terminator或其他终端软件并替换默认终端和右键菜单</h1><p>Ubuntu默认所使用的gnome-terminal，虽然简洁好用，但是不能分多个窗口<br>我个人在使用过程中会出现输入卡顿，补全卡顿等问题，有时候很烦心<br>使用一个外观更加现代，功能更加丰富，性能强大的Terminal，可以提高我们的效率</p><span id="more"></span><h2 id="请注意区分"><a href="#请注意区分" class="headerlink" title="请注意区分"></a>请注意区分</h2><p>Terminal与Shell是不同的</p><ul><li>Terminal是用来显示Shell，与Shell交互的界面  </li><li>Shell则是系统内核Core外层，与Core进行交互的一层</li></ul><p>在GUI环境下理论上不存在真正的Terminal，所以你看到这些TerminalGUI往往都会带有Simulator的字样<br>在22.04版本中，需要使用<code>Ctrl+Alt+F3/4/5/6</code>来进入不同Ternimal，这个才是Ubuntu真正的终端。<br>退出请尝试<code>Ctrl+Alt+F1/2/7</code>，或在终端输入用户名密码登陆后尝试<code>starx</code>命令  </p><h2 id="安装你选择的终端软件"><a href="#安装你选择的终端软件" class="headerlink" title="安装你选择的终端软件"></a>安装你选择的终端软件</h2><p>例如安装Terminator</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install terminator<br></code></pre></td></tr></table></figure><p>或者从.deb .AppImage 等软件包安装<br>请确保你知道软件安装的位置</p><h2 id="替换默认终端的快捷键"><a href="#替换默认终端的快捷键" class="headerlink" title="替换默认终端的快捷键"></a>替换默认终端的快捷键</h2><p>使用<code>Ctrl+Alt+T</code>就可以快捷打开终端<br>有的终端软件在安装之后就会自动替换该快捷键<br>如果没有替换，请使用如下指令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gsettings set org.gnome.desktop.default-applications.terminal exec /usr/bin/terminator<br>gsettings set org.gnome.desktop.default-applications.terminal exec-arg &quot;-x&quot;<br></code></pre></td></tr></table></figure><p>请把<code>exec</code>后的路径更换成你自己终端的路径<br>要还原初始，请使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gsettings reset org.gnome.desktop.default-applications.terminal exec<br>gsettings reset org.gnome.desktop.default-applications.terminal exec-arg<br></code></pre></td></tr></table></figure><p>也可以通过间接启动的方式  </p><p>1.打开Gnome-terminal，转到你的Profile预设，选择Command命令选项卡<br>2.勾选运行自定义命令而不是Shell<br>3.在自定义命令中键入运行你的Termimal 例如<code>terminator</code>  </p><p>如果需要恢复，请使用<code>gnome-terminal --preferences</code>打开选项卡，并取消勾选上述选项</p><h2 id="替换右键菜单"><a href="#替换右键菜单" class="headerlink" title="替换右键菜单"></a>替换右键菜单</h2><p>如果是按照上述第二种方法，此时右键菜单应该已经可用<br>选择在此打开Terminal即可打开你的自定义终端<br>如果没有生效，可以使用这个nautilus<a href="https://github.com/Stunkymonkey/nautilus-open-any-terminal">插件</a><br>这个插件会增加一个新的右键菜单，在当前目录下启动你的终端<br>该插件同时也支持Caja文件管理器，几乎支持所有的主流终端软件，但是需要自己做一些简单的配置<br>建议从源代码安装，安装完成后<code>nautilus -q</code>重新启动文件管理器即可<br>要配置该拓展，需要使用命令行或者dconf-editor<br>通过编辑<code>com.github.stunkymonkey.nautilus-open-any-terminal</code>中的四个不同参数即可  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">gsettings set com.github.stunkymonkey.nautilus-open-any-terminal terminal alacritty<br>gsettings set com.github.stunkymonkey.nautilus-open-any-terminal keybindings &#x27;&lt;Ctrl&gt;&lt;Alt&gt;t&#x27;<br>gsettings set com.github.stunkymonkey.nautilus-open-any-terminal new-tab true<br>gsettings set com.github.stunkymonkey.nautilus-open-any-terminal flatpak system<br></code></pre></td></tr></table></figure><p>建议参考Github原文章的参数  </p><p>2024.7.5</p><p>15:43  </p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
      <tag>终端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用GitHub Pages和Hexo搭建个人博客</title>
    <link href="/2024/06/25/Pages%E5%92%8CHexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2024/06/25/Pages%E5%92%8CHexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="使用GitHub-Pages与Hexo搭建个人博客"><a href="#使用GitHub-Pages与Hexo搭建个人博客" class="headerlink" title="使用GitHub Pages与Hexo搭建个人博客"></a>使用GitHub Pages与Hexo搭建个人博客</h1><p>看了许多利用GitHub Pages建立个人博客的例子，使用的比较多的就是<strong>jkeyll</strong>和<strong>Hexo</strong>，最终选择了使用<strong>Hexo</strong>搭建我的博客，遵循先搭建再部署的原则</p><span id="more"></span><h2 id="搭建博客"><a href="#搭建博客" class="headerlink" title="搭建博客"></a>搭建博客</h2><p>参考<a href="https://hexo.io/zh-cn/">Hexo官方网站</a>，需要先安装以下应用程序  </p><ul><li><strong><a href="https://nodejs.org/">Node.js</a></strong>  </li><li><strong><a href="https://git-scm.com/">Git</a></strong></li></ul><h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><p>不同的操作系统拥有不同的安装程序  </p><ul><li>Windows一般使用<a href="https://git-scm.com/download/win">安装包</a>  </li><li>Mac系统可以使用Homebrew或者对应安装程序</li><li>Linux则可以通过apt&#x2F;yum包管理器来进行安装<br>在控制台中键入<br><code>sudo apt-get install git-core</code><br>或者<br><code>sudo yum install git-core</code></li></ul><h2 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h2><p>直接访问<a href="https://nodejs.org/zh-cn/download/">Node.js官方提供的下载网址</a><br>选择你自己的操作系统和版本，按提示操作即可<br>这里建议Windows和Mac使用安装程序安装<br>Linux使用nvm进行包管理（安装完记得source ~&#x2F;.bashrc）</p><h2 id="安装Hexo并建立项目"><a href="#安装Hexo并建立项目" class="headerlink" title="安装Hexo并建立项目"></a>安装Hexo并建立项目</h2><p>直接使用npm安装Hexo  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli  <br></code></pre></td></tr></table></figure><p>然后新建一个空目录，用于Hexo的初始化  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> main<br>hexo init main<br><span class="hljs-built_in">cd</span> main<br>npm install<br></code></pre></td></tr></table></figure><blockquote><p>这样你的Hexo项目就建立好了，各文件的作用请参考<a href="https://hexo.io/zh-cn/docs/setup">文档</a><br>随后就可以为你的Blog选一个主题了，官方提供了一个<a href="https://hexo.io/themes/">主题列表</a>，你可以在里面挑选自己喜欢的样式<br>当然也可以直接Google或者Github搜索，有一些主题应该是没有被收录的  </p></blockquote><p>一般导入主题方法如下  </p><blockquote><p>本次采用<a href="https://github.com/fluid-dev/hexo-theme-fluid">Fluid主题</a>  </p></blockquote><p><strong>1. 下载解压</strong><br>下载主题文件并解压到themes目录下，将解压出的文件夹命名为主题名<br><strong>2. 修改内容</strong><br>修改Hexo目录中的_config.yml  </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">theme：主题名</span>  <br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span><br></code></pre></td></tr></table></figure><p><strong>3.其他事项</strong><br>有些主题需要自己创建部分内容，例如Fluid主题就需要自己创建About页面</p><h2 id="尝试本地运行"><a href="#尝试本地运行" class="headerlink" title="尝试本地运行"></a>尝试本地运行</h2><p>在项目目录，例如main下输入  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo g<br><span class="hljs-comment"># or</span><br>hexo generate<br></code></pre></td></tr></table></figure><p>该命令会生成对应的静态文件在public中<br>控制台中输入  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo s<br><span class="hljs-comment"># or</span><br>hexo server<br></code></pre></td></tr></table></figure><p>即可启动服务<br>在浏览器中打开对应网址<a href="http://localhost:4000/">http://localhost:4000</a>即可预览博客<br>每次修改博客内容或者配置想要预览的时候，请先使用<code>hexo clean</code>清除本地文件，然后重新生成并启动服务  </p><h2 id="编写博客"><a href="#编写博客" class="headerlink" title="编写博客"></a>编写博客</h2><p>使用<code>hexo new [layout] &lt;title&gt;</code>就可以新建一个博客页面了。<br>其中Layout为博客的布局，默认支持post，page，draft三种，储存在scaffolds文件夹下,不同布局的文章会储存在不同的位置下  </p><table><thead><tr><th align="center">布局</th><th align="center">路径</th></tr></thead><tbody><tr><td align="center">post</td><td align="center">source&#x2F;_posts</td></tr><tr><td align="center">page</td><td align="center">source&#x2F;_pages</td></tr><tr><td align="center">draft</td><td align="center">source&#x2F;_drafts</td></tr></tbody></table><blockquote><p>通过编辑_config.yaml文件中new_post_name，可以更改默认的文件名称，添加时间标签可以让我们更加方便管理博客,具体的更改方式可以参考<a href="https://hexo.io/zh-cn/docs/writing#%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0">这里</a>  </p></blockquote><p>添加一篇新的post</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new post &lt;your_title&gt;<br></code></pre></td></tr></table></figure><p>随后你的source&#x2F;_posts文件夹中就会出现这样一个.md文件，依照正常Html或者Markdown格式就可以撰写文章了  </p><blockquote><p>.md文件上方有用<code>---</code>分割的区域<br>这是文章的扉页，是front-matter提供的功能，可以用来自定义文章的各类变量</p></blockquote><table><thead><tr><th>参数</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>layout</code></td><td>布局</td><td><a href="/zh-cn/docs/configuration#%E6%96%87%E7%AB%A0"><code>config.default_layout</code></a></td></tr><tr><td><code>title</code></td><td>标题</td><td>文章的文件名</td></tr><tr><td><code>date</code></td><td>建立日期</td><td>文件建立日期</td></tr><tr><td><code>updated</code></td><td>更新日期</td><td>文件更新日期</td></tr><tr><td><code>comments</code></td><td>开启文章的评论功能</td><td><code>true</code></td></tr><tr><td><code>tags</code></td><td>标签（不适用于分页）</td><td></td></tr><tr><td><code>categories</code></td><td>分类（不适用于分页）</td><td></td></tr><tr><td><code>permalink</code></td><td>覆盖文章的永久链接，永久链接应该以 <code>/</code> 或 <code>.html</code> 结尾</td><td><code>null</code></td></tr><tr><td><code>excerpt</code></td><td>纯文本的页面摘要。使用 <a href="/zh-cn/docs/tag-plugins#%E6%96%87%E7%AB%A0%E6%91%98%E8%A6%81%E5%92%8C%E6%88%AA%E6%96%AD">该插件</a> 来格式化文本</td><td></td></tr><tr><td><code>disableNunjucks</code></td><td>启用时禁用 Nunjucks 标签 <code>&#123;&#123; &#125;&#125;</code>&#x2F;<code>&#123;% %&#125;</code> 和 <a href="/zh-cn/docs/tag-plugins">标签插件</a> 的渲染功能</td><td>false</td></tr><tr><td><code>lang</code></td><td>设置语言以覆盖 <a href="/zh-cn/docs/internationalization#%E8%B7%AF%E5%BE%84">自动检测</a></td><td>继承自 <code>_config.yml</code></td></tr><tr><td><code>published</code></td><td>文章是否发布</td><td>对于 <code>_posts</code> 下的文章为 <code>true</code>，对于 <code>_draft</code> 下的文章为 <code>false</code></td></tr></tbody></table><p>有关分类与标签编辑，请参照<a href="https://hexo.io/zh-cn/docs/front-matter#%E5%88%86%E7%B1%BB%E5%92%8C%E6%A0%87%E7%AD%BE">这里</a></p><h1 id="部署博客"><a href="#部署博客" class="headerlink" title="部署博客"></a>部署博客</h1><p>建立博客，编辑完成我们的页面，就可以部署到服务器上，这样就能在互联网上访问我们自己的博客了<br>本着免费够用的原则，选择GitHub Pages进行部署</p><h2 id="安装部署工具"><a href="#安装部署工具" class="headerlink" title="安装部署工具"></a>安装部署工具</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>一行搞定</p><h2 id="设置GitHub-Pages"><a href="#设置GitHub-Pages" class="headerlink" title="设置GitHub Pages"></a>设置GitHub Pages</h2><ol><li><p>新建一个仓库，命名为<code>用户名.gitbub.io</code>  </p></li><li><p>仓库中会默认有一个index.md文件，我们需要的是仓库的克隆地址，在Clone选项卡中复制即可  </p></li><li><p>转到仓库设置页面，在Pages选项卡中选择你的页面对应的分支，一般选择默认main分支即可。</p></li><li><p>建议为仓库和本机配置SSH密钥，可以提高安全性，方便我们修改或上传文档。具体操作清参阅Github<a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">教程</a></p></li></ol><h2 id="在-config-yml-中修改参数"><a href="#在-config-yml-中修改参数" class="headerlink" title="在_config.yml 中修改参数"></a>在_config.yml 中修改参数</h2><p>将deploy项目修改为如下形式</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>    <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/&lt;username&gt;/&lt;project&gt;</span><br>    <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure><blockquote><p><code>repo</code>是你自己仓库的HTTP或SSH地址，结尾是.git,请不要与浏览器地址混淆<br><code>branch</code> 选择你在上面Pages页面里设置的分支<br>除此以外，还需要在Git中设置你的name和email，请参考<a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">ProGit</a>，或者直接利用Vscode的源代码管理功能&#x2F;Git插件来管理Git与Github账户</p></blockquote><p>此时运行  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean<br>hexo g<br>hexo d<br></code></pre></td></tr></table></figure><p>即可将自己的网站部署到对应Github分支，访问你自己的主页<code>&lt;GitHub 用户名&gt;.github.io</code>即可查看结果<br>部署需要时间，博客的更新并不是部署了就会立即更新，请耐心等待。</p><h2 id="Git连接问题"><a href="#Git连接问题" class="headerlink" title="Git连接问题"></a>Git连接问题</h2><p>如果你使用代理连接Github，那么很有可能会发生连接失败的问题<br>在上述的<a href="#%E8%AE%BE%E7%BD%AEgithub-pages">SSH配置</a>中，Github官方文档提到了测试SSH连接的操作步骤，请以该步骤的结果作为参考<br>如果提示SSH连接失败，那么可能是端口的问题<br>在默认的.ssh文件夹中新建文件，键入以下内容</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">Host</span> <span class="hljs-string">github.com</span><br><span class="hljs-attr">HostName</span> <span class="hljs-string">ssh.github.com</span><br><span class="hljs-attr">User</span> <span class="hljs-string">git</span><br><span class="hljs-attr">Port</span> <span class="hljs-string">22</span><br></code></pre></td></tr></table></figure><p><code>Port</code> 修改为22或者443即可<br>将文件重命名为config，SSH连接应该会恢复</p><h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>以上就是我搭建个人博客经历的大致历程。<br>写完这篇文章作为博客的第一篇文章，我的心里还是挺开心的，毕竟自己搭起来了一个小博客，以后可以存放我自己的乱七八糟的东西。说不定以后可以买一个域名重定向到这里，让我的文章能被更多的人看到，帮助到更多的人。</p><p>2024.6.26<br>19:10</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>GitHub Pages</tag>
      
      <tag>Hexo</tag>
      
      <tag>Vscode</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
